    language: android
    sudo: required
    jdk: oraclejdk8
    before_cache:
    - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
    - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
    cache:
      directories:
      - "$HOME/.gradle/caches/"
      - "$HOME/.gradle/wrapper/"
    env:
      global:
      - secure: FsHtQV3onZulOtXJjd+laUKEAX+vQwD+c86O6GEA7uBE0QCB5Q6tgFH7ffY/qFRDljhtSjlGn6vAnTdpWCiT2QgImYJrTSrBhh/Vtu2Ju0HxYyb8AwViUqyfcWBcPG7m9FgR6nhWYotojaCx1xlTdjf5x9ly3wSDXFO70ihdlnFzbzYA+85b3Mk+eRhFr+0EadAbkF1ILHF8v66b+DW8CEyUyux1Oow7kyQOA8QCu0ooaJj2MRQxkqi+lHxqtmnuQQt/Sb0zsAXp1SPGNRCBJR2Di+RbHXSo+YQy7kNsWIVd1A5ZZNCpEu48Uoa8fBvdINRhgeNrdr8Hj+ZTMk+hoYmCzh/3RcWOthwqg90dF4tQYWS6EcreKzMzIMgXsFpsNi5ocSKlHLXukHev+CXBio5ZHpRgp/VsObgVFd6+nmqE881EUV/QDykS0Gt5KdIbFv8M5w3NO78KZR6eXGsTgk2jtf1Iei2W4Sx84GnY3dpKNOC19nbdr1L+nHffVdgRmOs14pqV4XckDkA0JaEiY3b1gYKSDAow4ABEJ2NefNMB8iiOMYNotHplcOxyxccNRYHTNVrwbfglFlJZbGogcDzvMkw6DOppz1JhrUY5/FMkdAi0gaQvqpOh1psrDnf/s8Sm3qrZZvZiC1sMjpp0J9Y7rjcCGho66IVZhfBpCDs=
      - secure: Verook92/52vmWswN7dHkxEN0gOk4ntjTqimISTDRkpLpTylBgieN2kUgBdlstbjRGF2i6QUlIagDV79etyYZ9A47AWG4483VFtIjoa8QVxk+qmWM46UVXDnLURRe1nfTHDKIwKvAWZIMTPORJcFjH79RpBectGJ8slHlzs+4uhevRWPdXpjyoP3P+rAbNxFfNFWjQL4rpHoD4kSnrksJ0SKdAWVQWewE/Ru3Q3yx0hsOobtNA6FYkaNtXTcVY1baIXD3tSmjjhBIBqY/1Qw3nhfSZQG1c9aLtwRztLyRBAiLw/EyRNa/RufreITdQEyG56L5/YOyCiX6MVKu87FFRa0Pgju2kTnsAbFSyWrD6dil6dxddOyAHKEF7JHui0GZmi0S1mide3CZ98kcr9Hh2bExlVW4bYp6g8G2kDF5iis6/kwzyt3Zegr7DJ1h30GCphEmrptHjpZy8Csup6HaURMB7da+OCSSyiXZoapqeIiN36Gsh0vqUHymdgktd6a4kIsg8oIrnq9koa12I2PIlBvfCHA9oe4dRtKn/hWKW0IbQ7bTgCLrJ7vTtWVzECKHooAG1H90CW8hj0NoDDk54+2lofHA93+hRq1aQM3cwhEBphbLGXgzIRNDSY/vYimHkwZShhNxWvsZPpmoWBs2eJvjrzdEOebTYjqsrg+sro=
    android:
      components:
      - tools
      - platform-tools
      - build-tools-26.0.0
      - android-26
      - android-21
      - extra-google-m2repository
      - extra-android-m2repository
      - sys-img-armeabi-v7a-android-21
      licenses:
      - android-sdk-preview-license-.+
      - android-sdk-license-.+
      - google-gdk-license-.+
    before_install:
    - openssl aes-256-cbc -K $encrypted_768906361fb5_key -iv $encrypted_768906361fb5_iv -in keystore1.jks.enc -out keystore1.jks -d
    - mkdir "$ANDROID_HOME/licenses" || true
    - echo -e "\n8933bad161af4178b1185d1a37fbf41ea5269c55" > "$ANDROID_HOME/licenses/android-sdk-license"
    - echo -e "\n84831b9409646a918e30573bab4c9c91346d8abd" > "$ANDROID_HOME/licenses/android-sdk-preview-license"
    - chmod +x gradlew
    - "./gradlew dependencies || true"
    before_script:
    - echo no | android create avd --force -n test -t android-21 --abi armeabi-v7a
    - emulator -avd test -no-skin -no-audio -no-window &
    - android-wait-for-emulator
    - adb shell input keyevent 82 &
    script:
    - "./gradlew clean build connectedCheck -PdisablePreDex --stacktrace"
    before_deploy:
    - cp $TRAVIS_BUILD_DIR/keystore1.jks $HOME
    - cd app/build/outputs/apk/
    - jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore $HOME/keystore1.jks
      -storepass $storepass -keypass $keypass app-release-unsigned.apk key1
    - jarsigner -verify app-release-unsigned.apk
    - "${ANDROID_HOME}/build-tools/26.0.0/zipalign -v 4 app-release-unsigned.apk qrmodule.apk"
    deploy:
      provider: releases
      file: qrmodule.apk
      skip_cleanup: true
      on:
        repo: FireCat1987/QRmoduleApp
        tags: true
        all_branches: true
      api_key:
        secure: FBKypfIPIQmagIvQJgPE+4RTJd4sKuSHBCNEcJwbeOAk53EQHNp8C0e3eUjR6MAf/mTkPXJhV+kvzdc5Naie3FfUmTXnxP8X7/iBQUrq6OX47zP+RbgoXm8zA9Rs6GEQBLX0ouR5a5IxkHoGYMOk+pyej9j79jxWilcpv2mhQ1cvM5tj8clapL+2WQvFLwRG+gM27uDJp29Dw6kvBwIhOdVXQYGtZ3FdIQ5GsCBuUkOYpT1P3/G2O74+QaSOgUrFI0JsoME3gyO7eusxA9qKZu6GOWKbGLI3hOG6waRELWBPNT4uhOBqtxk0XbA7IwLG1z6lF2W04CO0mATKBFb3Oi3JCCSp5xUukRXRs+c+aVpedRJ9+147m4z6XKXlvnSJqkxGawcNfKy4mgRwVmILiAyTNFQmCGgyY5gjwglhTp9mlf1jJ6heerw7Yw/lWnY/jp7iG6nDiI3EM3YM672vyqOKzSf7vGvZDvYuRF1hF9ZQlcBFVx61piSZ4/9+PnCwZPYRfBlHvlwvPI9agBTlLaQhTAPQmmilwEbJkuWoh2gfSdYw9s7KRZPvryWCAOXQfxapf848GC+S5aVnN+LQIw5QrxVWzKWImB9s1g+Yr9g8CP3rWRgv1Ypff/442sG3coO0qiMvACZGRLAjnAgP0fwrWU7o44tyABbAeAqei6I=